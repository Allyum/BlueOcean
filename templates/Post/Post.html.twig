{% extends 'base.html.twig' %}

{% block body %}
    <div class="container">
        <div class="card">
            {% include 'Widget/Post.html.twig' with {'post': post} %}
        </div>

        <div class="card">
            <h3>Comments</h3>
            <a href="{{ path('app_comment_new', {'id': post.id}) }}" class="btn">Add New Comment</a>
            {% for comment in post.comments %}
                <div style="border: 1px solid #eee; border-radius: 4px; padding: 10px; margin: 10px 0; background-color: #f9f9f9;">
                    <div style="display: flex; align-items: center; margin-bottom: 8px;">
                        {% if comment.userId and comment.userId.profilePicture %}
                            <img src="{{ asset(comment.userId.profilePicture) }}" alt="Profile"
                                 style="width: 25px; height: 25px; border-radius: 50%; margin-right: 8px; object-fit: cover;">
                        {% else %}
                            <div style="width: 25px; height: 25px; border-radius: 50%; background-color: #ddd; margin-right: 8px; display: flex; align-items: center; justify-content: center;">
                                <span style="font-size: 12px; color: #666;">ðŸ‘¤</span>
                            </div>
                        {% endif %}
                        <small>{{ comment.userId ? comment.userId.email : 'Anonymous' }}</small>
                    </div>
                    <p style="margin: 0;">{{ comment.content }}</p>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}
